import{d as Ft,l as jt,B as j,g as mt,p as Xt,D as Vt,f as Xe,h as Bt,i as Mt,j as Ht}from"./index-CkVXyyZz.js";var $t={};const qt=Ft(jt);(function(r){r.__esModule=!0;var e=qt,t=5;function n(c){var f=j.alloc(2);return f.writeUInt16BE(c,0),f}var s={data:j.alloc(0),dataLength:0,sequence:0},i=function(c,f){return{makeBlocks:function(a){var o=j.concat([n(a.length),a]),l=f-5,h=Math.ceil(o.length/l);o=j.concat([o,j.alloc(h*l-o.length+1).fill(0)]);for(var I=[],p=0;p<h;p++){var d=j.alloc(5);d.writeUInt16BE(c,0),d.writeUInt8(t,2),d.writeUInt16BE(p,3);var _=o.slice(p*l,(p+1)*l);I.push(j.concat([d,_]))}return I},reduceResponse:function(a,o){var l=a||s,h=l.data,I=l.dataLength,p=l.sequence;if(o.readUInt16BE(0)!==c)throw new e.TransportError("Invalid channel","InvalidChannel");if(o.readUInt8(2)!==t)throw new e.TransportError("Invalid tag","InvalidTag");if(o.readUInt16BE(3)!==p)throw new e.TransportError("Invalid sequence","InvalidSequence");a||(I=o.readUInt16BE(5)),p++;var d=o.slice(a?5:7);return h=j.concat([h,d]),h.length>I&&(h=h.slice(0,I)),{data:h,dataLength:I,sequence:p}},getReducedResult:function(a){if(a&&a.dataLength===a.data.length)return a.data}}};r.default=i})($t);const zt=mt($t);var Te={exports:{}};const Yt="2.0.0",gt=256,Wt=Number.MAX_SAFE_INTEGER||9007199254740991,Kt=16,Zt=gt-6,Jt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var fe={MAX_LENGTH:gt,MAX_SAFE_COMPONENT_LENGTH:Kt,MAX_SAFE_BUILD_LENGTH:Zt,MAX_SAFE_INTEGER:Wt,RELEASE_TYPES:Jt,SEMVER_SPEC_VERSION:Yt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},me={};const Qt=typeof Xt=="object"&&me&&me.NODE_DEBUG&&/\bsemver\b/i.test(me.NODE_DEBUG)?(...r)=>console.error("SEMVER",...r):()=>{};var pe=Qt;(function(r,e){const{MAX_SAFE_COMPONENT_LENGTH:t,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:s}=fe,i=pe;e=r.exports={};const c=e.re=[],f=e.safeRe=[],a=e.src=[],o=e.t={};let l=0;const h="[a-zA-Z0-9-]",I=[["\\s",1],["\\d",s],[h,n]],p=_=>{for(const[b,P]of I)_=_.split(`${b}*`).join(`${b}{0,${P}}`).split(`${b}+`).join(`${b}{1,${P}}`);return _},d=(_,b,P)=>{const T=p(b),q=l++;i(_,q,b),o[_]=q,a[q]=b,c[q]=new RegExp(b,P?"g":void 0),f[q]=new RegExp(T,P?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${h}*`),d("MAINVERSION",`(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})\\.(${a[o.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})\\.(${a[o.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${a[o.NUMERICIDENTIFIER]}|${a[o.NONNUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${a[o.NUMERICIDENTIFIERLOOSE]}|${a[o.NONNUMERICIDENTIFIER]})`),d("PRERELEASE",`(?:-(${a[o.PRERELEASEIDENTIFIER]}(?:\\.${a[o.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${a[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${a[o.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER",`${h}+`),d("BUILD",`(?:\\+(${a[o.BUILDIDENTIFIER]}(?:\\.${a[o.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${a[o.MAINVERSION]}${a[o.PRERELEASE]}?${a[o.BUILD]}?`),d("FULL",`^${a[o.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${a[o.MAINVERSIONLOOSE]}${a[o.PRERELEASELOOSE]}?${a[o.BUILD]}?`),d("LOOSE",`^${a[o.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${a[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${a[o.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:\\.(${a[o.XRANGEIDENTIFIER]})(?:${a[o.PRERELEASE]})?${a[o.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${a[o.XRANGEIDENTIFIERLOOSE]})(?:${a[o.PRERELEASELOOSE]})?${a[o.BUILD]}?)?)?`),d("XRANGE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${a[o.GTLT]}\\s*${a[o.XRANGEPLAINLOOSE]}$`),d("COERCEPLAIN",`(^|[^\\d])(\\d{1,${t}})(?:\\.(\\d{1,${t}}))?(?:\\.(\\d{1,${t}}))?`),d("COERCE",`${a[o.COERCEPLAIN]}(?:$|[^\\d])`),d("COERCEFULL",a[o.COERCEPLAIN]+`(?:${a[o.PRERELEASE]})?(?:${a[o.BUILD]})?(?:$|[^\\d])`),d("COERCERTL",a[o.COERCE],!0),d("COERCERTLFULL",a[o.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${a[o.LONETILDE]}\\s+`,!0),e.tildeTrimReplace="$1~",d("TILDE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${a[o.LONETILDE]}${a[o.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${a[o.LONECARET]}\\s+`,!0),e.caretTrimReplace="$1^",d("CARET",`^${a[o.LONECARET]}${a[o.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${a[o.LONECARET]}${a[o.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${a[o.GTLT]}\\s*(${a[o.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${a[o.GTLT]}\\s*(${a[o.LOOSEPLAIN]}|${a[o.XRANGEPLAIN]})`,!0),e.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${a[o.XRANGEPLAIN]})\\s+-\\s+(${a[o.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${a[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${a[o.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Te,Te.exports);var se=Te.exports;const kt=Object.freeze({loose:!0}),er=Object.freeze({}),tr=r=>r?typeof r!="object"?kt:r:er;var _e=tr;const Ve=/^[0-9]+$/,Rt=(r,e)=>{const t=Ve.test(r),n=Ve.test(e);return t&&n&&(r=+r,e=+e),r===e?0:t&&!n?-1:n&&!t?1:r<e?-1:1},rr=(r,e)=>Rt(e,r);var It={compareIdentifiers:Rt,rcompareIdentifiers:rr};const ie=pe,{MAX_LENGTH:Be,MAX_SAFE_INTEGER:ae}=fe,{safeRe:Me,t:He}=se,nr=_e,{compareIdentifiers:Z}=It;let sr=class F{constructor(e,t){if(t=nr(t),e instanceof F){if(e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>Be)throw new TypeError(`version is longer than ${Be} characters`);ie("SemVer",e,t),this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease;const n=e.trim().match(t.loose?Me[He.LOOSE]:Me[He.FULL]);if(!n)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+n[1],this.minor=+n[2],this.patch=+n[3],this.major>ae||this.major<0)throw new TypeError("Invalid major version");if(this.minor>ae||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>ae||this.patch<0)throw new TypeError("Invalid patch version");n[4]?this.prerelease=n[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){const i=+s;if(i>=0&&i<ae)return i}return s}):this.prerelease=[],this.build=n[5]?n[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(ie("SemVer.compare",this.version,this.options,e),!(e instanceof F)){if(typeof e=="string"&&e===this.version)return 0;e=new F(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof F||(e=new F(e,this.options)),Z(this.major,e.major)||Z(this.minor,e.minor)||Z(this.patch,e.patch)}comparePre(e){if(e instanceof F||(e=new F(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let t=0;do{const n=this.prerelease[t],s=e.prerelease[t];if(ie("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Z(n,s)}while(++t)}compareBuild(e){e instanceof F||(e=new F(e,this.options));let t=0;do{const n=this.build[t],s=e.build[t];if(ie("prerelease compare",t,n,s),n===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(n===void 0)return-1;if(n===s)continue;return Z(n,s)}while(++t)}inc(e,t,n){switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t,n);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t,n);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t,n),this.inc("pre",t,n);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",t,n),this.inc("pre",t,n);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const s=Number(n)?1:0;if(!t&&n===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[s];else{let i=this.prerelease.length;for(;--i>=0;)typeof this.prerelease[i]=="number"&&(this.prerelease[i]++,i=-2);if(i===-1){if(t===this.prerelease.join(".")&&n===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(s)}}if(t){let i=[t,s];n===!1&&(i=[t]),Z(this.prerelease[0],t)===0?isNaN(this.prerelease[1])&&(this.prerelease=i):this.prerelease=i}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var x=sr;const qe=x,ir=(r,e,t=!1)=>{if(r instanceof qe)return r;try{return new qe(r,e)}catch(n){if(!t)return null;throw n}};var k=ir;const ar=k,or=(r,e)=>{const t=ar(r,e);return t?t.version:null};var lr=or;const cr=k,ur=(r,e)=>{const t=cr(r.trim().replace(/^[=v]+/,""),e);return t?t.version:null};var hr=ur;const ze=x,fr=(r,e,t,n,s)=>{typeof t=="string"&&(s=n,n=t,t=void 0);try{return new ze(r instanceof ze?r.version:r,t).inc(e,n,s).version}catch{return null}};var pr=fr;const Ye=k,Er=(r,e)=>{const t=Ye(r,null,!0),n=Ye(e,null,!0),s=t.compare(n);if(s===0)return null;const i=s>0,c=i?t:n,f=i?n:t,a=!!c.prerelease.length;if(!!f.prerelease.length&&!a)return!f.patch&&!f.minor?"major":c.patch?"patch":c.minor?"minor":"major";const l=a?"pre":"";return t.major!==n.major?l+"major":t.minor!==n.minor?l+"minor":t.patch!==n.patch?l+"patch":"prerelease"};var dr=Er;const vr=x,mr=(r,e)=>new vr(r,e).major;var $r=mr;const gr=x,Rr=(r,e)=>new gr(r,e).minor;var Ir=Rr;const Sr=x,Lr=(r,e)=>new Sr(r,e).patch;var Nr=Lr;const yr=k,Or=(r,e)=>{const t=yr(r,e);return t&&t.prerelease.length?t.prerelease:null};var Ar=Or;const We=x,Tr=(r,e,t)=>new We(r,t).compare(new We(e,t));var U=Tr;const wr=U,br=(r,e,t)=>wr(e,r,t);var xr=br;const _r=U,Pr=(r,e)=>_r(r,e,!0);var Cr=Pr;const Ke=x,Dr=(r,e,t)=>{const n=new Ke(r,t),s=new Ke(e,t);return n.compare(s)||n.compareBuild(s)};var Pe=Dr;const Ur=Pe,Gr=(r,e)=>r.sort((t,n)=>Ur(t,n,e));var Fr=Gr;const jr=Pe,Xr=(r,e)=>r.sort((t,n)=>jr(n,t,e));var Vr=Xr;const Br=U,Mr=(r,e,t)=>Br(r,e,t)>0;var Ee=Mr;const Hr=U,qr=(r,e,t)=>Hr(r,e,t)<0;var Ce=qr;const zr=U,Yr=(r,e,t)=>zr(r,e,t)===0;var St=Yr;const Wr=U,Kr=(r,e,t)=>Wr(r,e,t)!==0;var Lt=Kr;const Zr=U,Jr=(r,e,t)=>Zr(r,e,t)>=0;var De=Jr;const Qr=U,kr=(r,e,t)=>Qr(r,e,t)<=0;var Ue=kr;const en=St,tn=Lt,rn=Ee,nn=De,sn=Ce,an=Ue,on=(r,e,t,n)=>{switch(e){case"===":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r===t;case"!==":return typeof r=="object"&&(r=r.version),typeof t=="object"&&(t=t.version),r!==t;case"":case"=":case"==":return en(r,t,n);case"!=":return tn(r,t,n);case">":return rn(r,t,n);case">=":return nn(r,t,n);case"<":return sn(r,t,n);case"<=":return an(r,t,n);default:throw new TypeError(`Invalid operator: ${e}`)}};var Nt=on;const ln=x,cn=k,{safeRe:oe,t:le}=se,un=(r,e)=>{if(r instanceof ln)return r;if(typeof r=="number"&&(r=String(r)),typeof r!="string")return null;e=e||{};let t=null;if(!e.rtl)t=r.match(e.includePrerelease?oe[le.COERCEFULL]:oe[le.COERCE]);else{const a=e.includePrerelease?oe[le.COERCERTLFULL]:oe[le.COERCERTL];let o;for(;(o=a.exec(r))&&(!t||t.index+t[0].length!==r.length);)(!t||o.index+o[0].length!==t.index+t[0].length)&&(t=o),a.lastIndex=o.index+o[1].length+o[2].length;a.lastIndex=-1}if(t===null)return null;const n=t[2],s=t[3]||"0",i=t[4]||"0",c=e.includePrerelease&&t[5]?`-${t[5]}`:"",f=e.includePrerelease&&t[6]?`+${t[6]}`:"";return cn(`${n}.${s}.${i}${c}${f}`,e)};var hn=un,$e,Ze;function fn(){return Ze||(Ze=1,$e=function(r){r.prototype[Symbol.iterator]=function*(){for(let e=this.head;e;e=e.next)yield e.value}}),$e}var pn=L;L.Node=K;L.create=L;function L(r){var e=this;if(e instanceof L||(e=new L),e.tail=null,e.head=null,e.length=0,r&&typeof r.forEach=="function")r.forEach(function(s){e.push(s)});else if(arguments.length>0)for(var t=0,n=arguments.length;t<n;t++)e.push(arguments[t]);return e}L.prototype.removeNode=function(r){if(r.list!==this)throw new Error("removing node which does not belong to this list");var e=r.next,t=r.prev;return e&&(e.prev=t),t&&(t.next=e),r===this.head&&(this.head=e),r===this.tail&&(this.tail=t),r.list.length--,r.next=null,r.prev=null,r.list=null,e};L.prototype.unshiftNode=function(r){if(r!==this.head){r.list&&r.list.removeNode(r);var e=this.head;r.list=this,r.next=e,e&&(e.prev=r),this.head=r,this.tail||(this.tail=r),this.length++}};L.prototype.pushNode=function(r){if(r!==this.tail){r.list&&r.list.removeNode(r);var e=this.tail;r.list=this,r.prev=e,e&&(e.next=r),this.tail=r,this.head||(this.head=r),this.length++}};L.prototype.push=function(){for(var r=0,e=arguments.length;r<e;r++)dn(this,arguments[r]);return this.length};L.prototype.unshift=function(){for(var r=0,e=arguments.length;r<e;r++)vn(this,arguments[r]);return this.length};L.prototype.pop=function(){if(this.tail){var r=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,r}};L.prototype.shift=function(){if(this.head){var r=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,r}};L.prototype.forEach=function(r,e){e=e||this;for(var t=this.head,n=0;t!==null;n++)r.call(e,t.value,n,this),t=t.next};L.prototype.forEachReverse=function(r,e){e=e||this;for(var t=this.tail,n=this.length-1;t!==null;n--)r.call(e,t.value,n,this),t=t.prev};L.prototype.get=function(r){for(var e=0,t=this.head;t!==null&&e<r;e++)t=t.next;if(e===r&&t!==null)return t.value};L.prototype.getReverse=function(r){for(var e=0,t=this.tail;t!==null&&e<r;e++)t=t.prev;if(e===r&&t!==null)return t.value};L.prototype.map=function(r,e){e=e||this;for(var t=new L,n=this.head;n!==null;)t.push(r.call(e,n.value,this)),n=n.next;return t};L.prototype.mapReverse=function(r,e){e=e||this;for(var t=new L,n=this.tail;n!==null;)t.push(r.call(e,n.value,this)),n=n.prev;return t};L.prototype.reduce=function(r,e){var t,n=this.head;if(arguments.length>1)t=e;else if(this.head)n=this.head.next,t=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=0;n!==null;s++)t=r(t,n.value,s),n=n.next;return t};L.prototype.reduceReverse=function(r,e){var t,n=this.tail;if(arguments.length>1)t=e;else if(this.tail)n=this.tail.prev,t=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var s=this.length-1;n!==null;s--)t=r(t,n.value,s),n=n.prev;return t};L.prototype.toArray=function(){for(var r=new Array(this.length),e=0,t=this.head;t!==null;e++)r[e]=t.value,t=t.next;return r};L.prototype.toArrayReverse=function(){for(var r=new Array(this.length),e=0,t=this.tail;t!==null;e++)r[e]=t.value,t=t.prev;return r};L.prototype.slice=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new L;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(;s!==null&&n<e;n++,s=s.next)t.push(s.value);return t};L.prototype.sliceReverse=function(r,e){e=e||this.length,e<0&&(e+=this.length),r=r||0,r<0&&(r+=this.length);var t=new L;if(e<r||e<0)return t;r<0&&(r=0),e>this.length&&(e=this.length);for(var n=this.length,s=this.tail;s!==null&&n>e;n--)s=s.prev;for(;s!==null&&n>r;n--,s=s.prev)t.push(s.value);return t};L.prototype.splice=function(r,e,...t){r>this.length&&(r=this.length-1),r<0&&(r=this.length+r);for(var n=0,s=this.head;s!==null&&n<r;n++)s=s.next;for(var i=[],n=0;s&&n<e;n++)i.push(s.value),s=this.removeNode(s);s===null&&(s=this.tail),s!==this.head&&s!==this.tail&&(s=s.prev);for(var n=0;n<t.length;n++)s=En(this,s,t[n]);return i};L.prototype.reverse=function(){for(var r=this.head,e=this.tail,t=r;t!==null;t=t.prev){var n=t.prev;t.prev=t.next,t.next=n}return this.head=e,this.tail=r,this};function En(r,e,t){var n=e===r.head?new K(t,null,e,r):new K(t,e,e.next,r);return n.next===null&&(r.tail=n),n.prev===null&&(r.head=n),r.length++,n}function dn(r,e){r.tail=new K(e,r.tail,null,r),r.head||(r.head=r.tail),r.length++}function vn(r,e){r.head=new K(e,null,r.head,r),r.tail||(r.tail=r.head),r.length++}function K(r,e,t,n){if(!(this instanceof K))return new K(r,e,t,n);this.list=n,this.value=r,e?(e.next=this,this.prev=e):this.prev=null,t?(t.prev=this,this.next=t):this.next=null}try{fn()(L)}catch{}const mn=pn,Y=Symbol("max"),V=Symbol("length"),J=Symbol("lengthCalculator"),ne=Symbol("allowStale"),W=Symbol("maxAge"),X=Symbol("dispose"),Je=Symbol("noDisposeOnSet"),A=Symbol("lruList"),D=Symbol("cache"),yt=Symbol("updateAgeOnGet"),ge=()=>1;class $n{constructor(e){if(typeof e=="number"&&(e={max:e}),e||(e={}),e.max&&(typeof e.max!="number"||e.max<0))throw new TypeError("max must be a non-negative number");this[Y]=e.max||1/0;const t=e.length||ge;if(this[J]=typeof t!="function"?ge:t,this[ne]=e.stale||!1,e.maxAge&&typeof e.maxAge!="number")throw new TypeError("maxAge must be a number");this[W]=e.maxAge||0,this[X]=e.dispose,this[Je]=e.noDisposeOnSet||!1,this[yt]=e.updateAgeOnGet||!1,this.reset()}set max(e){if(typeof e!="number"||e<0)throw new TypeError("max must be a non-negative number");this[Y]=e||1/0,te(this)}get max(){return this[Y]}set allowStale(e){this[ne]=!!e}get allowStale(){return this[ne]}set maxAge(e){if(typeof e!="number")throw new TypeError("maxAge must be a non-negative number");this[W]=e,te(this)}get maxAge(){return this[W]}set lengthCalculator(e){typeof e!="function"&&(e=ge),e!==this[J]&&(this[J]=e,this[V]=0,this[A].forEach(t=>{t.length=this[J](t.value,t.key),this[V]+=t.length})),te(this)}get lengthCalculator(){return this[J]}get length(){return this[V]}get itemCount(){return this[A].length}rforEach(e,t){t=t||this;for(let n=this[A].tail;n!==null;){const s=n.prev;Qe(this,e,n,t),n=s}}forEach(e,t){t=t||this;for(let n=this[A].head;n!==null;){const s=n.next;Qe(this,e,n,t),n=s}}keys(){return this[A].toArray().map(e=>e.key)}values(){return this[A].toArray().map(e=>e.value)}reset(){this[X]&&this[A]&&this[A].length&&this[A].forEach(e=>this[X](e.key,e.value)),this[D]=new Map,this[A]=new mn,this[V]=0}dump(){return this[A].map(e=>ue(this,e)?!1:{k:e.key,v:e.value,e:e.now+(e.maxAge||0)}).toArray().filter(e=>e)}dumpLru(){return this[A]}set(e,t,n){if(n=n||this[W],n&&typeof n!="number")throw new TypeError("maxAge must be a number");const s=n?Date.now():0,i=this[J](t,e);if(this[D].has(e)){if(i>this[Y])return Q(this,this[D].get(e)),!1;const a=this[D].get(e).value;return this[X]&&(this[Je]||this[X](e,a.value)),a.now=s,a.maxAge=n,a.value=t,this[V]+=i-a.length,a.length=i,this.get(e),te(this),!0}const c=new gn(e,t,i,s,n);return c.length>this[Y]?(this[X]&&this[X](e,t),!1):(this[V]+=c.length,this[A].unshift(c),this[D].set(e,this[A].head),te(this),!0)}has(e){if(!this[D].has(e))return!1;const t=this[D].get(e).value;return!ue(this,t)}get(e){return Re(this,e,!0)}peek(e){return Re(this,e,!1)}pop(){const e=this[A].tail;return e?(Q(this,e),e.value):null}del(e){Q(this,this[D].get(e))}load(e){this.reset();const t=Date.now();for(let n=e.length-1;n>=0;n--){const s=e[n],i=s.e||0;if(i===0)this.set(s.k,s.v);else{const c=i-t;c>0&&this.set(s.k,s.v,c)}}}prune(){this[D].forEach((e,t)=>Re(this,t,!1))}}const Re=(r,e,t)=>{const n=r[D].get(e);if(n){const s=n.value;if(ue(r,s)){if(Q(r,n),!r[ne])return}else t&&(r[yt]&&(n.value.now=Date.now()),r[A].unshiftNode(n));return s.value}},ue=(r,e)=>{if(!e||!e.maxAge&&!r[W])return!1;const t=Date.now()-e.now;return e.maxAge?t>e.maxAge:r[W]&&t>r[W]},te=r=>{if(r[V]>r[Y])for(let e=r[A].tail;r[V]>r[Y]&&e!==null;){const t=e.prev;Q(r,e),e=t}},Q=(r,e)=>{if(e){const t=e.value;r[X]&&r[X](t.key,t.value),r[V]-=t.length,r[D].delete(t.key),r[A].removeNode(e)}};class gn{constructor(e,t,n,s,i){this.key=e,this.value=t,this.length=n,this.now=s,this.maxAge=i||0}}const Qe=(r,e,t,n)=>{let s=t.value;ue(r,s)&&(Q(r,t),r[ne]||(s=void 0)),s&&e.call(n,s.value,s.key,r)};var Rn=$n,Ie,ke;function G(){if(ke)return Ie;ke=1;class r{constructor(u,g){if(g=n(g),u instanceof r)return u.loose===!!g.loose&&u.includePrerelease===!!g.includePrerelease?u:new r(u.raw,g);if(u instanceof s)return this.raw=u.value,this.set=[[u]],this.format(),this;if(this.options=g,this.loose=!!g.loose,this.includePrerelease=!!g.includePrerelease,this.raw=u.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(m=>this.parseRange(m.trim())).filter(m=>m.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const m=this.set[0];if(this.set=this.set.filter($=>!d($[0])),this.set.length===0)this.set=[m];else if(this.set.length>1){for(const $ of this.set)if($.length===1&&_($[0])){this.set=[$];break}}}this.format()}format(){return this.range=this.set.map(u=>u.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(u){const m=((this.options.includePrerelease&&I)|(this.options.loose&&p))+":"+u,$=t.get(m);if($)return $;const v=this.options.loose,R=v?f[a.HYPHENRANGELOOSE]:f[a.HYPHENRANGE];u=u.replace(R,Ut(this.options.includePrerelease)),i("hyphen replace",u),u=u.replace(f[a.COMPARATORTRIM],o),i("comparator trim",u),u=u.replace(f[a.TILDETRIM],l),i("tilde trim",u),u=u.replace(f[a.CARETTRIM],h),i("caret trim",u);let N=u.split(" ").map(O=>P(O,this.options)).join(" ").split(/\s+/).map(O=>Dt(O,this.options));v&&(N=N.filter(O=>(i("loose invalid filter",O,this.options),!!O.match(f[a.COMPARATORLOOSE])))),i("range list",N);const S=new Map,y=N.map(O=>new s(O,this.options));for(const O of y){if(d(O))return[O];S.set(O.value,O)}S.size>1&&S.has("")&&S.delete("");const C=[...S.values()];return t.set(m,C),C}intersects(u,g){if(!(u instanceof r))throw new TypeError("a Range is required");return this.set.some(m=>b(m,g)&&u.set.some($=>b($,g)&&m.every(v=>$.every(R=>v.intersects(R,g)))))}test(u){if(!u)return!1;if(typeof u=="string")try{u=new c(u,this.options)}catch{return!1}for(let g=0;g<this.set.length;g++)if(Gt(this.set[g],u,this.options))return!0;return!1}}Ie=r;const e=Rn,t=new e({max:1e3}),n=_e,s=de(),i=pe,c=x,{safeRe:f,t:a,comparatorTrimReplace:o,tildeTrimReplace:l,caretTrimReplace:h}=se,{FLAG_INCLUDE_PRERELEASE:I,FLAG_LOOSE:p}=fe,d=E=>E.value==="<0.0.0-0",_=E=>E.value==="",b=(E,u)=>{let g=!0;const m=E.slice();let $=m.pop();for(;g&&m.length;)g=m.every(v=>$.intersects(v,u)),$=m.pop();return g},P=(E,u)=>(i("comp",E,u),E=bt(E,u),i("caret",E),E=q(E,u),i("tildes",E),E=_t(E,u),i("xrange",E),E=Ct(E,u),i("stars",E),E),T=E=>!E||E.toLowerCase()==="x"||E==="*",q=(E,u)=>E.trim().split(/\s+/).map(g=>wt(g,u)).join(" "),wt=(E,u)=>{const g=u.loose?f[a.TILDELOOSE]:f[a.TILDE];return E.replace(g,(m,$,v,R,N)=>{i("tilde",E,m,$,v,R,N);let S;return T($)?S="":T(v)?S=`>=${$}.0.0 <${+$+1}.0.0-0`:T(R)?S=`>=${$}.${v}.0 <${$}.${+v+1}.0-0`:N?(i("replaceTilde pr",N),S=`>=${$}.${v}.${R}-${N} <${$}.${+v+1}.0-0`):S=`>=${$}.${v}.${R} <${$}.${+v+1}.0-0`,i("tilde return",S),S})},bt=(E,u)=>E.trim().split(/\s+/).map(g=>xt(g,u)).join(" "),xt=(E,u)=>{i("caret",E,u);const g=u.loose?f[a.CARETLOOSE]:f[a.CARET],m=u.includePrerelease?"-0":"";return E.replace(g,($,v,R,N,S)=>{i("caret",E,$,v,R,N,S);let y;return T(v)?y="":T(R)?y=`>=${v}.0.0${m} <${+v+1}.0.0-0`:T(N)?v==="0"?y=`>=${v}.${R}.0${m} <${v}.${+R+1}.0-0`:y=`>=${v}.${R}.0${m} <${+v+1}.0.0-0`:S?(i("replaceCaret pr",S),v==="0"?R==="0"?y=`>=${v}.${R}.${N}-${S} <${v}.${R}.${+N+1}-0`:y=`>=${v}.${R}.${N}-${S} <${v}.${+R+1}.0-0`:y=`>=${v}.${R}.${N}-${S} <${+v+1}.0.0-0`):(i("no pr"),v==="0"?R==="0"?y=`>=${v}.${R}.${N}${m} <${v}.${R}.${+N+1}-0`:y=`>=${v}.${R}.${N}${m} <${v}.${+R+1}.0-0`:y=`>=${v}.${R}.${N} <${+v+1}.0.0-0`),i("caret return",y),y})},_t=(E,u)=>(i("replaceXRanges",E,u),E.split(/\s+/).map(g=>Pt(g,u)).join(" ")),Pt=(E,u)=>{E=E.trim();const g=u.loose?f[a.XRANGELOOSE]:f[a.XRANGE];return E.replace(g,(m,$,v,R,N,S)=>{i("xRange",E,m,$,v,R,N,S);const y=T(v),C=y||T(R),O=C||T(N),ee=O;return $==="="&&ee&&($=""),S=u.includePrerelease?"-0":"",y?$===">"||$==="<"?m="<0.0.0-0":m="*":$&&ee?(C&&(R=0),N=0,$===">"?($=">=",C?(v=+v+1,R=0,N=0):(R=+R+1,N=0)):$==="<="&&($="<",C?v=+v+1:R=+R+1),$==="<"&&(S="-0"),m=`${$+v}.${R}.${N}${S}`):C?m=`>=${v}.0.0${S} <${+v+1}.0.0-0`:O&&(m=`>=${v}.${R}.0${S} <${v}.${+R+1}.0-0`),i("xRange return",m),m})},Ct=(E,u)=>(i("replaceStars",E,u),E.trim().replace(f[a.STAR],"")),Dt=(E,u)=>(i("replaceGTE0",E,u),E.trim().replace(f[u.includePrerelease?a.GTE0PRE:a.GTE0],"")),Ut=E=>(u,g,m,$,v,R,N,S,y,C,O,ee,ni)=>(T(m)?g="":T($)?g=`>=${m}.0.0${E?"-0":""}`:T(v)?g=`>=${m}.${$}.0${E?"-0":""}`:R?g=`>=${g}`:g=`>=${g}${E?"-0":""}`,T(y)?S="":T(C)?S=`<${+y+1}.0.0-0`:T(O)?S=`<${y}.${+C+1}.0-0`:ee?S=`<=${y}.${C}.${O}-${ee}`:E?S=`<${y}.${C}.${+O+1}-0`:S=`<=${S}`,`${g} ${S}`.trim()),Gt=(E,u,g)=>{for(let m=0;m<E.length;m++)if(!E[m].test(u))return!1;if(u.prerelease.length&&!g.includePrerelease){for(let m=0;m<E.length;m++)if(i(E[m].semver),E[m].semver!==s.ANY&&E[m].semver.prerelease.length>0){const $=E[m].semver;if($.major===u.major&&$.minor===u.minor&&$.patch===u.patch)return!0}return!1}return!0};return Ie}var Se,et;function de(){if(et)return Se;et=1;const r=Symbol("SemVer ANY");class e{static get ANY(){return r}constructor(l,h){if(h=t(h),l instanceof e){if(l.loose===!!h.loose)return l;l=l.value}l=l.trim().split(/\s+/).join(" "),c("comparator",l,h),this.options=h,this.loose=!!h.loose,this.parse(l),this.semver===r?this.value="":this.value=this.operator+this.semver.version,c("comp",this)}parse(l){const h=this.options.loose?n[s.COMPARATORLOOSE]:n[s.COMPARATOR],I=l.match(h);if(!I)throw new TypeError(`Invalid comparator: ${l}`);this.operator=I[1]!==void 0?I[1]:"",this.operator==="="&&(this.operator=""),I[2]?this.semver=new f(I[2],this.options.loose):this.semver=r}toString(){return this.value}test(l){if(c("Comparator.test",l,this.options.loose),this.semver===r||l===r)return!0;if(typeof l=="string")try{l=new f(l,this.options)}catch{return!1}return i(l,this.operator,this.semver,this.options)}intersects(l,h){if(!(l instanceof e))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new a(l.value,h).test(this.value):l.operator===""?l.value===""?!0:new a(this.value,h).test(l.semver):(h=t(h),h.includePrerelease&&(this.value==="<0.0.0-0"||l.value==="<0.0.0-0")||!h.includePrerelease&&(this.value.startsWith("<0.0.0")||l.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&l.operator.startsWith(">")||this.operator.startsWith("<")&&l.operator.startsWith("<")||this.semver.version===l.semver.version&&this.operator.includes("=")&&l.operator.includes("=")||i(this.semver,"<",l.semver,h)&&this.operator.startsWith(">")&&l.operator.startsWith("<")||i(this.semver,">",l.semver,h)&&this.operator.startsWith("<")&&l.operator.startsWith(">")))}}Se=e;const t=_e,{safeRe:n,t:s}=se,i=Nt,c=pe,f=x,a=G();return Se}const In=G(),Sn=(r,e,t)=>{try{e=new In(e,t)}catch{return!1}return e.test(r)};var ve=Sn;const Ln=G(),Nn=(r,e)=>new Ln(r,e).set.map(t=>t.map(n=>n.value).join(" ").trim().split(" "));var yn=Nn;const On=x,An=G(),Tn=(r,e,t)=>{let n=null,s=null,i=null;try{i=new An(e,t)}catch{return null}return r.forEach(c=>{i.test(c)&&(!n||s.compare(c)===-1)&&(n=c,s=new On(n,t))}),n};var wn=Tn;const bn=x,xn=G(),_n=(r,e,t)=>{let n=null,s=null,i=null;try{i=new xn(e,t)}catch{return null}return r.forEach(c=>{i.test(c)&&(!n||s.compare(c)===1)&&(n=c,s=new bn(n,t))}),n};var Pn=_n;const Le=x,Cn=G(),tt=Ee,Dn=(r,e)=>{r=new Cn(r,e);let t=new Le("0.0.0");if(r.test(t)||(t=new Le("0.0.0-0"),r.test(t)))return t;t=null;for(let n=0;n<r.set.length;++n){const s=r.set[n];let i=null;s.forEach(c=>{const f=new Le(c.semver.version);switch(c.operator){case">":f.prerelease.length===0?f.patch++:f.prerelease.push(0),f.raw=f.format();case"":case">=":(!i||tt(f,i))&&(i=f);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${c.operator}`)}}),i&&(!t||tt(t,i))&&(t=i)}return t&&r.test(t)?t:null};var Un=Dn;const Gn=G(),Fn=(r,e)=>{try{return new Gn(r,e).range||"*"}catch{return null}};var jn=Fn;const Xn=x,Ot=de(),{ANY:Vn}=Ot,Bn=G(),Mn=ve,rt=Ee,nt=Ce,Hn=Ue,qn=De,zn=(r,e,t,n)=>{r=new Xn(r,n),e=new Bn(e,n);let s,i,c,f,a;switch(t){case">":s=rt,i=Hn,c=nt,f=">",a=">=";break;case"<":s=nt,i=qn,c=rt,f="<",a="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Mn(r,e,n))return!1;for(let o=0;o<e.set.length;++o){const l=e.set[o];let h=null,I=null;if(l.forEach(p=>{p.semver===Vn&&(p=new Ot(">=0.0.0")),h=h||p,I=I||p,s(p.semver,h.semver,n)?h=p:c(p.semver,I.semver,n)&&(I=p)}),h.operator===f||h.operator===a||(!I.operator||I.operator===f)&&i(r,I.semver))return!1;if(I.operator===a&&c(r,I.semver))return!1}return!0};var Ge=zn;const Yn=Ge,Wn=(r,e,t)=>Yn(r,e,">",t);var Kn=Wn;const Zn=Ge,Jn=(r,e,t)=>Zn(r,e,"<",t);var Qn=Jn;const st=G(),kn=(r,e,t)=>(r=new st(r,t),e=new st(e,t),r.intersects(e,t));var es=kn;const ts=ve,rs=U;var ns=(r,e,t)=>{const n=[];let s=null,i=null;const c=r.sort((l,h)=>rs(l,h,t));for(const l of c)ts(l,e,t)?(i=l,s||(s=l)):(i&&n.push([s,i]),i=null,s=null);s&&n.push([s,null]);const f=[];for(const[l,h]of n)l===h?f.push(l):!h&&l===c[0]?f.push("*"):h?l===c[0]?f.push(`<=${h}`):f.push(`${l} - ${h}`):f.push(`>=${l}`);const a=f.join(" || "),o=typeof e.raw=="string"?e.raw:String(e);return a.length<o.length?a:e};const it=G(),Fe=de(),{ANY:Ne}=Fe,re=ve,je=U,ss=(r,e,t={})=>{if(r===e)return!0;r=new it(r,t),e=new it(e,t);let n=!1;e:for(const s of r.set){for(const i of e.set){const c=as(s,i,t);if(n=n||c!==null,c)continue e}if(n)return!1}return!0},is=[new Fe(">=0.0.0-0")],at=[new Fe(">=0.0.0")],as=(r,e,t)=>{if(r===e)return!0;if(r.length===1&&r[0].semver===Ne){if(e.length===1&&e[0].semver===Ne)return!0;t.includePrerelease?r=is:r=at}if(e.length===1&&e[0].semver===Ne){if(t.includePrerelease)return!0;e=at}const n=new Set;let s,i;for(const p of r)p.operator===">"||p.operator===">="?s=ot(s,p,t):p.operator==="<"||p.operator==="<="?i=lt(i,p,t):n.add(p.semver);if(n.size>1)return null;let c;if(s&&i){if(c=je(s.semver,i.semver,t),c>0)return null;if(c===0&&(s.operator!==">="||i.operator!=="<="))return null}for(const p of n){if(s&&!re(p,String(s),t)||i&&!re(p,String(i),t))return null;for(const d of e)if(!re(p,String(d),t))return!1;return!0}let f,a,o,l,h=i&&!t.includePrerelease&&i.semver.prerelease.length?i.semver:!1,I=s&&!t.includePrerelease&&s.semver.prerelease.length?s.semver:!1;h&&h.prerelease.length===1&&i.operator==="<"&&h.prerelease[0]===0&&(h=!1);for(const p of e){if(l=l||p.operator===">"||p.operator===">=",o=o||p.operator==="<"||p.operator==="<=",s){if(I&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===I.major&&p.semver.minor===I.minor&&p.semver.patch===I.patch&&(I=!1),p.operator===">"||p.operator===">="){if(f=ot(s,p,t),f===p&&f!==s)return!1}else if(s.operator===">="&&!re(s.semver,String(p),t))return!1}if(i){if(h&&p.semver.prerelease&&p.semver.prerelease.length&&p.semver.major===h.major&&p.semver.minor===h.minor&&p.semver.patch===h.patch&&(h=!1),p.operator==="<"||p.operator==="<="){if(a=lt(i,p,t),a===p&&a!==i)return!1}else if(i.operator==="<="&&!re(i.semver,String(p),t))return!1}if(!p.operator&&(i||s)&&c!==0)return!1}return!(s&&o&&!i&&c!==0||i&&l&&!s&&c!==0||I||h)},ot=(r,e,t)=>{if(!r)return e;const n=je(r.semver,e.semver,t);return n>0?r:n<0||e.operator===">"&&r.operator===">="?e:r},lt=(r,e,t)=>{if(!r)return e;const n=je(r.semver,e.semver,t);return n<0?r:n>0||e.operator==="<"&&r.operator==="<="?e:r};var os=ss;const ye=se,ct=fe,ls=x,ut=It,cs=k,us=lr,hs=hr,fs=pr,ps=dr,Es=$r,ds=Ir,vs=Nr,ms=Ar,$s=U,gs=xr,Rs=Cr,Is=Pe,Ss=Fr,Ls=Vr,Ns=Ee,ys=Ce,Os=St,As=Lt,Ts=De,ws=Ue,bs=Nt,xs=hn,_s=de(),Ps=G(),Cs=ve,Ds=yn,Us=wn,Gs=Pn,Fs=Un,js=jn,Xs=Ge,Vs=Kn,Bs=Qn,Ms=es,Hs=ns,qs=os;var zs={parse:cs,valid:us,clean:hs,inc:fs,diff:ps,major:Es,minor:ds,patch:vs,prerelease:ms,compare:$s,rcompare:gs,compareLoose:Rs,compareBuild:Is,sort:Ss,rsort:Ls,gt:Ns,lt:ys,eq:Os,neq:As,gte:Ts,lte:ws,cmp:bs,coerce:xs,Comparator:_s,Range:Ps,satisfies:Cs,toComparators:Ds,maxSatisfying:Us,minSatisfying:Gs,minVersion:Fs,validRange:js,outside:Xs,gtr:Vs,ltr:Bs,intersects:Ms,simplifyRange:Hs,subset:qs,SemVer:ls,re:ye.re,src:ye.src,tokens:ye.t,SEMVER_SPEC_VERSION:ct.SEMVER_SPEC_VERSION,RELEASE_TYPES:ct.RELEASE_TYPES,compareIdentifiers:ut.compareIdentifiers,rcompareIdentifiers:ut.rcompareIdentifiers};const ht=mt(zs);var we=function(){return we=Object.assign||function(r){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&(r[s]=e[s])}return r},we.apply(this,arguments)},z,w;(function(r){r.blue="blue",r.nanoS="nanoS",r.nanoSP="nanoSP",r.nanoX="nanoX",r.nanoFTS="nanoFTS"})(w||(w={}));var be=(z={},z[w.blue]={id:w.blue,productName:"Ledger Blue",productIdMM:0,legacyUsbProductId:0,usbOnly:!0,memorySize:480*1024,masks:[822083584,822149120],getBlockSize:function(r){return 4*1024}},z[w.nanoS]={id:w.nanoS,productName:"Ledger Nano S",productIdMM:16,legacyUsbProductId:1,usbOnly:!0,memorySize:320*1024,masks:[823132160],getBlockSize:function(r){var e;return ht.lt((e=ht.coerce(r))!==null&&e!==void 0?e:"","2.0.0")?4*1024:2*1024}},z[w.nanoSP]={id:w.nanoSP,productName:"Ledger Nano S Plus",productIdMM:80,legacyUsbProductId:5,usbOnly:!0,memorySize:1536*1024,masks:[856686592],getBlockSize:function(r){return 32}},z[w.nanoX]={id:w.nanoX,productName:"Ledger Nano X",productIdMM:64,legacyUsbProductId:4,usbOnly:!1,memorySize:2*1024*1024,masks:[855638016],getBlockSize:function(r){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-0004-0000-4c6564676572",notifyUuid:"13d63400-2c97-0004-0001-4c6564676572",writeUuid:"13d63400-2c97-0004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-0004-0003-4c6564676572"}]},z[w.nanoFTS]={id:w.nanoFTS,productName:"Ledger Nano FTS",productIdMM:96,legacyUsbProductId:6,usbOnly:!1,memorySize:2*1024*1024,masks:[857735168],getBlockSize:function(r){return 4*1024},bluetoothSpec:[{serviceUuid:"13d63400-2c97-6004-0000-4c6564676572",notifyUuid:"13d63400-2c97-6004-0001-4c6564676572",writeUuid:"13d63400-2c97-6004-0002-4c6564676572",writeCmdUuid:"13d63400-2c97-6004-0003-4c6564676572"}]},z);w.blue,w.nanoS,w.nanoSP,w.nanoX,w.nanoFTS;var ft=Object.values(be),At=11415,pt=function(r){var e=ft.find(function(s){return s.legacyUsbProductId===r});if(e)return e;var t=r>>8,n=ft.find(function(s){return s.productIdMM===t});return n},Ys=[],Et={};for(var Ws in be){var dt=be[Ws],Oe=dt.bluetoothSpec;if(Oe)for(var Ae=0;Ae<Oe.length;Ae++){var ce=Oe[Ae];Ys.push(ce.serviceUuid),Et[ce.serviceUuid]=Et[ce.serviceUuid.replace(/-/g,"")]=we({deviceModel:dt},ce)}}let Ks=0;const H=[],vt=(r,e,t)=>{const n={type:r,id:String(++Ks),date:new Date};e&&(n.message=e),t&&(n.data=t),Js(n)},Zs=r=>(H.push(r),()=>{const e=H.indexOf(r);e!==-1&&(H[e]=H[H.length-1],H.pop())});function Js(r){for(let e=0;e<H.length;e++)try{H[e](r)}catch(t){console.error(t)}}typeof window<"u"&&(window.__ledgerLogsListen=Zs);var Qs=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),B=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(c){c(i)})}return new(t||(t=Promise))(function(i,c){function f(l){try{o(n.next(l))}catch(h){c(h)}}function a(l){try{o(n.throw(l))}catch(h){c(h)}}function o(l){l.done?i(l.value):s(l.value).then(f,a)}o((n=n.apply(r,e||[])).next())})},M=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,c;return c={next:f(0),throw:f(1),return:f(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function f(o){return function(l){return a([o,l])}}function a(o){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,s&&(i=o[0]&2?s.return:o[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,o[1])).done)return i;switch(s=0,i&&(o=[o[0]&2,i.value]),o[0]){case 0:case 1:i=o;break;case 4:return t.label++,{value:o[1],done:!1};case 5:t.label++,s=o[1],o=[0];continue;case 7:o=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(o[0]===6||o[0]===2)){t=0;continue}if(o[0]===3&&(!i||o[1]>i[0]&&o[1]<i[3])){t.label=o[1];break}if(o[0]===6&&t.label<i[1]){t.label=i[1],i=o;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(o);break}i[2]&&t.ops.pop(),t.trys.pop();continue}o=e.call(r,t)}catch(l){o=[6,l],s=0}finally{n=i=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},ks=function(r,e){var t=typeof Symbol=="function"&&r[Symbol.iterator];if(!t)return r;var n=t.call(r),s,i=[],c;try{for(;(e===void 0||e-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(f){c={error:f}}finally{try{s&&!s.done&&(t=n.return)&&t.call(n)}finally{if(c)throw c.error}}return i},ei=[{vendorId:At}],ti=function(){return Promise.resolve(!!(window.navigator&&window.navigator.hid))},he=function(){var r=navigator.hid;if(!r)throw new Mt("navigator.hid is not supported","HIDNotSupported");return r};function Tt(){return B(this,void 0,void 0,function(){var r;return M(this,function(e){switch(e.label){case 0:return[4,he().requestDevice({filters:ei})];case 1:return r=e.sent(),Array.isArray(r)?[2,r]:[2,[r]]}})})}function xe(){return B(this,void 0,void 0,function(){var r;return M(this,function(e){switch(e.label){case 0:return[4,he().getDevices()];case 1:return r=e.sent(),[2,r.filter(function(t){return t.vendorId===At})]}})})}function ri(){return B(this,void 0,void 0,function(){var r,e;return M(this,function(t){switch(t.label){case 0:return[4,xe()];case 1:return r=t.sent(),r.length>0?[2,r[0]]:[4,Tt()];case 2:return e=t.sent(),[2,e[0]]}})})}var ii=function(r){Qs(e,r);function e(t){var n=r.call(this)||this;return n.channel=Math.floor(Math.random()*65535),n.packetSize=64,n.inputs=[],n.read=function(){return n.inputs.length?Promise.resolve(n.inputs.shift()):new Promise(function(s){n.inputCallback=s})},n.onInputReport=function(s){var i=j.from(s.data.buffer);n.inputCallback?(n.inputCallback(i),n.inputCallback=null):n.inputs.push(i)},n._disconnectEmitted=!1,n._emitDisconnect=function(s){n._disconnectEmitted||(n._disconnectEmitted=!0,n.emit("disconnect",s))},n.exchange=function(s){return B(n,void 0,void 0,function(){var i,c=this;return M(this,function(f){switch(f.label){case 0:return[4,this.exchangeAtomicImpl(function(){return B(c,void 0,void 0,function(){var a,o,l,h,I,p,d,_,b;return M(this,function(P){switch(P.label){case 0:a=this,o=a.channel,l=a.packetSize,vt("apdu","=> "+s.toString("hex")),h=zt(o,l),I=h.makeBlocks(s),p=0,P.label=1;case 1:return p<I.length?[4,this.device.sendReport(0,I[p])]:[3,4];case 2:P.sent(),P.label=3;case 3:return p++,[3,1];case 4:return(d=h.getReducedResult(_))?[3,6]:[4,this.read()];case 5:return b=P.sent(),_=h.reduceResponse(_,b),[3,4];case 6:return vt("apdu","<= "+d.toString("hex")),[2,d]}})})}).catch(function(a){throw a&&a.message&&a.message.includes("write")?(c._emitDisconnect(a),new Vt(a.message)):a})];case 1:return i=f.sent(),[2,i]}})})},n.device=t,n.deviceModel=typeof t.productId=="number"?pt(t.productId):void 0,t.addEventListener("inputreport",n.onInputReport),n}return e.request=function(){return B(this,void 0,void 0,function(){var t,n;return M(this,function(s){switch(s.label){case 0:return[4,Tt()];case 1:return t=ks.apply(void 0,[s.sent(),1]),n=t[0],[2,e.open(n)]}})})},e.openConnected=function(){return B(this,void 0,void 0,function(){var t;return M(this,function(n){switch(n.label){case 0:return[4,xe()];case 1:return t=n.sent(),t.length===0?[2,null]:[2,e.open(t[0])]}})})},e.open=function(t){return B(this,void 0,void 0,function(){var n,s;return M(this,function(i){switch(i.label){case 0:return[4,t.open()];case 1:return i.sent(),n=new e(t),s=function(c){t===c.device&&(he().removeEventListener("disconnect",s),n._emitDisconnect(new Ht))},he().addEventListener("disconnect",s),[2,n]}})})},e.prototype.close=function(){return B(this,void 0,void 0,function(){return M(this,function(t){switch(t.label){case 0:return[4,this.exchangeBusyPromise];case 1:return t.sent(),this.device.removeEventListener("inputreport",this.onInputReport),[4,this.device.close()];case 2:return t.sent(),[2]}})})},e.prototype.setScrambleKey=function(){},e.isSupported=ti,e.list=xe,e.listen=function(t){var n=!1;ri().then(function(i){if(!i)t.error(new Xe("Access denied to use Ledger device"));else if(!n){var c=typeof i.productId=="number"?pt(i.productId):void 0;t.next({type:"add",descriptor:i,deviceModel:c}),t.complete()}},function(i){t.error(new Xe(i.message))});function s(){n=!0}return{unsubscribe:s}},e}(Bt);export{ii as default};
